<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/3dbdf65c77.js" crossorigin="anonymous"></script>
   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Task Reminder</title>
</head>
<body>
    <script>
        function updateLocalStorageOrder() {
            localStorage.clear();
    const items = document.querySelectorAll(".fa-ul > li");
    const updatedOrder = Array.from(items).map((item) => item.querySelector('.item-label').textContent);

    
    localStorage.setItem("itemOrder", JSON.stringify(updatedOrder));
    

  
    updatedOrder.forEach((value, index) => {
        localStorage.setItem(value, items[index].querySelector('.item-check').checked.toString());
    });
}


function loadItemsFromLocalStorage() {
  
    
    const itemOrder = JSON.parse(localStorage.getItem("itemOrder"));

    if (itemOrder) {
       
        itemOrder.forEach((key) => {
            
            const storedValue = localStorage.getItem(key);
            if (storedValue !== null) {
               
                buildliitem(key);
            }
        });
    }
}
    function clearlist(){
            const mainlist = document.getElementsByClassName("fa-ul")[0];

           
    localStorage.clear();
    updateLocalStorageOrder();
    while (mainlist.firstChild) {
                mainlist.removeChild(mainlist.firstChild);
            }
}
function buildlist(){
    console.log("hibuild");
    updateLocalStorageOrder();
   
}
function buildliitem(value){
    const labelValue = value;


const storedValue = localStorage.getItem(labelValue);




    const mainlist = document.getElementsByClassName("fa-ul")[0];

    const li = document.createElement("li");
    
      
    li.innerHTML = `
        <section class="item">
            <span class="fa-li"><i class="fas fa-grip-vertical" draggable="true" style="cursor: pointer;"></i></span>
            <input type="checkbox" id="${labelValue}" class="item-check">
        <label for="${labelValue}" class="item-label">${labelValue}</label>
            <div class="menu-container">
                <button class="icon-button menu-button">
                    <i class="fas fa-ellipsis-h" ></i>
                </button>
                <ul class="menu" >
                    <li><i class="fa fa-check"></i> <button class="inside" >Complete</button></li>
                    <li><i class="fas fa-trash"></i> <button class="inside">Delete</button></li>
                </ul>
            </div>
        </section>
    `;
    const checkbox = li.querySelector(".item-check");
if (storedValue === "true") {
    checkbox.checked = true;
}
   
    mainlist.appendChild(li);

}


function filterItems(filter) {
    const items = document.querySelectorAll(".fa-ul > li");
    
    items.forEach((item) => {
        
        const checkbox = item.querySelector(".item-check");
       
        const labelValue = checkbox.id;
       
        const storedValue = localStorage.getItem(labelValue);
        
        if (filter === "all" || (filter === "completed" && storedValue === "true") || (filter === "pending" && storedValue === "false")) {
            item.style.display = "list-item";
           
        } else {
            item.style.display = "none";
           
        }
    });
}


filterItems("All");
    </script>
    <div class="container">
      
        <main>
            
                <div class="input-placeholder">
                    <input type="text" class="input-text" required >
                    <div class="placeholder">
                        <span>&#xf550;</span>&nbsp; Add a new task
                    </div>
                </div>
               
           
            <section class="list">
                <div class ="head">
                    <div class="tab tex">
                    <input type="radio" name="task-tab" id="tab-all" checked>
  <label for="tab-all">All</label>
</div>
<div class="tab tex">
  <input type="radio" name="task-tab" id="tab-pending">
  <label for="tab-pending">Pending</label>
</div>
  <div class="tab tex">
  <input type="radio" name="task-tab" id="tab-completed">
  <label for="tab-completed">Completed</label></div>
                        <button class="tab delete" onclick="clearlist()">Clear All</button>
                     
                </div>
                
                   
                <div class ="items">
                
                    <ul class="fa-ul" id="item-list">
                       
                  
                        <script>
                            
                            loadItemsFromLocalStorage() ;

                        
                    </script>
                        
                </ul>
                </div>
                
             
            </section>
        </main>
    </div>

    <script type="text/javascript" src="script.js"></script>
</body>
</html>

